<%- include('../partails/header') -%>
    <%- include('../partails/navbar') -%>

        <div class="container mt-5">
            <div class="card shadow-lg animate__animated animate__fadeIn m-5">
                <div class="card-header bg-primary text-white text-center">
                    <h2>Order Details</h2>
                </div>
                <div class="card-body">
                    <% if (!order) { %>
                        <div class="alert alert-danger text-center">Order not found.</div>
                        <% } else { %>
                            <!-- Order Summary Section -->
                            <div class="mb-4">
                                <h4 class="text-center text-info">Order Summary</h4>
                                <p><strong>Order Number:</strong>
                                    <%= order._id %>
                                </p>
                                <p><strong>User:</strong>
                                    <%= order.username %>
                                </p>
                                <p><strong>Phone Number:</strong>
                                    <%= User.phone %>
                                </p>
                                <p><strong>Total Price:</strong> $<%= order.totalPrice.toFixed(2) %>
                                </p>
                                <p><strong>Status:</strong>
                                    <span class="badge bg-<%= order.status === 'Completed' ? 'success' : 'warning' %>">
                                        <%= order.status %>
                                    </span>
                                </p>
                            </div>

                            <!-- Order Items Section -->
                            <h4 class="text-center text-info mb-3">Items in the Order</h4>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover border">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Unit Price</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% order.items.forEach(item=> { %>
                                            <tr>
                                                <td>
                                                    <%= item.product_name %>
                                                </td>
                                                <td>
                                                    <%= item.quantity %>
                                                </td>
                                                <td>$<%= item.product_price.toFixed(2) %>
                                                </td>
                                                <td>$<%= (item.product_price * item.quantity).toFixed(2) %>
                                                </td>
                                            </tr>
                                            <% }) %>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center mt-4">
                                <a href="/orders/all-orders-user"
                                    class="btn btn-primary btn-lg animate__animated animate__pulse animate__infinite">Back
                                    to Orders</a>
                            </div>
                            <% } %>
                </div>
            </div>
        </div>

        <%- include('../partails/footer') -%>