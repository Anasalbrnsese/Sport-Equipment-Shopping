<%- include('../partails/header') -%>
    <%- include('../partails/navbar') -%>
        <div class="container mt-5">
            <div class="row justify-content-center mb-5">
                <div class="col-lg-8 col-md-10">
                    <div class="card shadow-lg border-0">
                        <div class="card-header bg-primary text-white text-center">
                            <h2 class="mb-0"><i class="fas fa-edit me-2"></i> Edit Product</h2>
                        </div>
                        <div class="card-body">
                            <% if (locals.errors) { %>
                                <% errors.forEach((err)=> { %>
                                    <div class="alert alert-danger">
                                        <i class="fas fa-exclamation-circle"></i>
                                        <%= err.msg %>
                                    </div>
                                    <% }) %>
                                        <% } %>

                                            <form action="/product/edit/<%= product._id %>" method="post"
                                                enctype="multipart/form-data" class="needs-validation">
                                                <div class="mb-4">
                                                    <label for="image" class="form-label"><i
                                                            class="fas fa-image me-2"></i> Product Image</label>
                                                    <input type="file" name="image" id="image" class="form-control">
                                                    <div class="form-text">Current Image: <img
                                                            src="<%= product.imageProduct %>" alt="Current Image"
                                                            width="100"></div>
                                                </div>

                                                <div class="mb-4">
                                                    <label for="title" class="form-label"><i
                                                            class="fas fa-tag me-2"></i> Product Title</label>
                                                    <input type="text" name="title" id="title" class="form-control"
                                                        value="<%= product.titleProduct %>" required>
                                                </div>

                                                <div class="mb-4">
                                                    <label for="price" class="form-label"><i
                                                            class="fas fa-dollar-sign me-2"></i> Product Price</label>
                                                    <input type="text" name="price" id="price" class="form-control"
                                                        value="<%= product.priceProduct %>" required>
                                                </div>

                                                <div class="mb-4">
                                                    <label for="category" class="form-label"><i
                                                            class="fas fa-list-alt me-2"></i> Product Category</label>
                                                    <select name="category" id="category" class="form-select" required>
                                                        <% categories.forEach(function (cat) { %>
                                                            <option value="<%= cat._id %>" <%=cat._id==product.category
                                                                ? 'selected' : '' %>>
                                                                <%= cat.title %>
                                                            </option>
                                                            <% }); %>
                                                    </select>
                                                </div>

                                                <div class="mb-4">
                                                    <label for="description" class="form-label"><i
                                                            class="fas fa-info-circle me-2"></i> Product
                                                        Description</label>
                                                    <textarea name="description" id="description" class="form-control"
                                                        rows="4" required><%= product.descriptionProduct %></textarea>
                                                </div>

                                                <div class="text-center">
                                                    <button type="submit" class="btn btn-primary btn-lg px-5">
                                                        <i class="fas fa-save me-2"></i> Save Changes
                                                    </button>
                                                </div>
                                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <%- include('../partails/footer') -%>