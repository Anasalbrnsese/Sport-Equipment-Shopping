<%- include('../partails/header') -%>
    <%- include('../partails/navbar') -%>
        <%- include('../partails/flashMessageLogin') -%>

            <div class="container light-style flex-grow-1 container-p-y" style="height:700px;">
                <h4 class="font-weight-bold py-3 mb-4">
                    Account settings
                </h4>

                <!-- Profile Image Upload and Account Settings Form -->
                <form action="/users/uploadAvatar" method="POST" enctype="multipart/form-data">
                    <div class="card overflow-hidden" style="border-radius:15px;">
                        <div class="row no-gutters row-bordered row-border-light">
                            <!-- Sidebar Navigation -->
                            <div class="col-md-3 pt-0">
                                <div class="list-group list-group-flush account-settings-links">
                                    <a class="list-group-item list-group-item-action active" data-toggle="tab"
                                        href="#account-general">General</a>
                                    <a class="list-group-item list-group-item-action" data-toggle="tab"
                                        href="#account-change-password">Change password</a>
                                    <a class="list-group-item list-group-item-action" data-toggle="tab"
                                        href="#account-info">Info</a>
                                </div>
                            </div>

                            <!-- Main Content Area -->
                            <div class="col-md-9">
                                <div class="tab-content">
                                    <!-- General Tab -->
                                    <div class="tab-pane fade active show" id="account-general">
                                        <div class="card-body media align-items-center">
                                            <!-- Profile Image Display -->
                                            <img src="<%= '/images/'+ User.avatar  %>" alt="Profile Image"
                                                onerror="this.onerror=null; this.src='/images/default-avatar.png';"
                                                class="d-block ui-w-80" style="border-radius:50px;">

                                            <!-- Upload New Image -->
                                            <div class="media-body ml-4" style="padding-top:22px;">
                                                <label class="btn btn-outline-primary">
                                                    Upload new photo
                                                    <input type="file" class="account-settings-fileinput" name="avatar"
                                                        id="avatar">
                                                </label>
                                                &nbsp;
                                                <input type="submit" name="avatar"
                                                    class="btn btn-default md-btn-flat" value="Save Image">
                                                <div class="text-light small mt-1">
                                                    Allowed JPG, GIF, or PNG. Max size of 800K
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="border-light m-0">

                                        <!-- General Settings Form -->
                                        <div class="card-body">
                                            <div class="form-group">
                                                <label class="form-label">Username</label>
                                                <input type="text" class="form-control mb-1" name="username"
                                                    value="<%= User ? User.name : '' %>">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Name</label>
                                                <input type="text" class="form-control" name="name"
                                                    value="<%= User ? User.name : '' %>">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">E-mail</label>
                                                <input type="text" id="email" class="form-control" name="email"
                                                    value="<%= User ? User.email : '' %>" disabled>
                                                <div class="alert alert-warning mt-3">
                                                    Your email is not confirmed. Please check your inbox.<br>
                                                    <a href="javascript:void(0)">Resend confirmation</a>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Company</label>
                                                <input type="text" class="form-control" name="company"
                                                    value="Company Ltd.">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="account-change-password">
                                        <div class="card-body">
                                            <div class="form-group">
                                                <label class="form-label">Current Password</label>
                                                <input type="password" class="form-control" name="currentPassword">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">New Password</label>
                                                <input type="password" class="form-control" name="newPassword">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Confirm New Password</label>
                                                <input type="password" class="form-control" name="confirmPassword">
                                            </div>
                                            <button type="submit" class="btn btn-primary mt-4">Change Password</button>
                                        </div>
                                    </div>

                                    <!-- Info Tab -->
                                    <div class="tab-pane fade" id="account-info">
                                        <div class="card-body">
                                            <p>Additional information can go here. This could be things like user bio,
                                                social media links, or anything you would like to add.</p>
                                            <!-- Add any extra details or forms you need for the info tab -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div class="text-right mt-3">
                        <button type="submit" class="btn btn-primary">Save changes</button>&nbsp;
                        <button type="button" class="btn btn-default">Cancel</button>
                    </div>
                </form>
            </div>

            <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>

            <%- include('../partails/footer') -%>